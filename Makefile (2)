CC=gcc
CFLAGS=-Wall -Wextra -O2 -g -std=c99
LD=gcc
LDFLAGS=-g
LDLIBS = -lz

# source files
FINDPNG_SRCS   = findpng.c crc.c
CATPNG_SRCS = catpng.c zutil.c crc.c

# object files
FINDPNG_OBJS = $(FINDPNG_SRCS:.c=.o)
CATPNG_OBJS = $(CATPNG_SRCS:.c=.o)

# targets
TARGETS= findpng catpng

# header files
# DEPS = png_def.h

all: $(TARGETS)

findpng: $(FINDPNG_OBJS) 
	$(LD) $(LDFLAGS) -o $@ $^ $(LDLIBS)

catpng: $(CATPNG_OBJS)
	$(LD) $(LDFLAGS) -o $@ $^ $(LDLIBS)

.c.o:
	$(CC) $(CFLAGS) -c $<

%.d: %.c
	gcc -MM -MF $@ $<  

.PHONY: clean
clean:
	rm -f *.d *.o $(CATPNG_OBJS) $(FINDPNG_OBJS) $(TARGETS)